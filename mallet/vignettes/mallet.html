<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />

<meta name="author" content="David Mimno and Måns Magnusson" />

<meta name="date" content="2022-07-19" />

<title>Introduction to R mallet</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Introduction to R mallet</h1>
<h4 class="author">David Mimno and Måns Magnusson</h4>
<h4 class="date">2022-07-19</h4>



<div id="installation" class="section level2">
<h2>Installation</h2>
<p>To use the mallet R package, we need to use <code>rJava</code>, an R
package for using Java within R (to access the mallet Java code). See
details at <a href="https://github.com/s-u/rJava">github.com/s-u/rJava</a>.</p>
<p>Next, install the <code>mallet</code> R package from CRAN. To
install, simply use <code>install.packages()</code></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;mallet&quot;</span>)</span></code></pre></div>
</div>
<div id="usage" class="section level2">
<h2>Usage</h2>
<p>Depending on the size of your data, it can be so that you need to
increase the Java virtual machine (JVM) heap memory to handle larger
corpora. To do this, you need to specify how much memory you want to
allocate to the JVM using the <code>Xmx</code> flag. Below is an example
of allocating 4 Gb to the JVM.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">java.parameters =</span> <span class="st">&quot;-Xmx4g&quot;</span>)</span></code></pre></div>
<p>To load the package, use <code>library()</code>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mallet)</span></code></pre></div>
<div id="reading-data-into-r" class="section level3">
<h3>Reading data into R</h3>
<p>There are multiple ways to read text data into R. A simple way is to
read individual text files into a character vector. Below is an example
of reading the different stop list txt files that come with the
<code>mallet</code> package into R as a character vector (that can be
used by the <code>mallet</code> R package as data).</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Note this is the path to the folder where the stoplists are stored in the R package.</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Change this path to another directory to read other txt files into R.</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>directory <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">&quot;stoplists&quot;</span>, <span class="at">package =</span> <span class="st">&quot;mallet&quot;</span>)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>files_in_directory <span class="ot">&lt;-</span> <span class="fu">list.files</span>(directory, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>txt_file_content <span class="ot">&lt;-</span> <span class="fu">character</span>(<span class="fu">length</span>(files_in_directory))</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="fu">seq_along</span>(files_in_directory)){</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  txt_file_content[i] <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="fu">readLines</span>(files_in_directory[i]), <span class="at">collapse =</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="co"># We can check the content with str()</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(txt_file_content)</span></code></pre></div>
<pre><code>##  chr [1:6] &quot;aber\nals\nam\nan\nauch\nauf\naus\nbei\nbin\nbis\nbist\nda\ndadurch\ndaher\ndarum\ndas\ndaß\ndass\ndein\ndeine\&quot;| __truncated__ ...</code></pre>
<p>We will now use the example data set of the State of the Union
addresses from 1946 to 2000 that is included with the
<code>mallet</code> R package as a <code>data.frame</code>. This data
can be accessed as follows.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;dplyr&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     intersect, setdiff, setequal, union</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(sotu)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>sotu[[<span class="st">&quot;text&quot;</span>]][<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>]</span></code></pre></div>
<pre><code>## [1] &quot;To the Congress of the United States:  &quot;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
## [2] &quot;A quarter century ago the Congress decided that it could no longer consider  the financial programs of the various departments on a piecemeal basis.  Instead it has called on the President to present a comprehensive Executive  Budget. The Congress has shown its satisfaction with that method by  extending the budget system and tightening its controls. The bigger and  more complex the Federal Program, the more necessary it is for the Chief  Executive to submit a single budget for action by the Congress.  &quot;</code></pre>
<p>Mallet also comes with five different stop list files (see above). We
can access the path to these lists as follows.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mallet_supported_stoplists</span>()</span></code></pre></div>
<pre><code>## [1] &quot;de&quot; &quot;en&quot; &quot;fi&quot; &quot;fr&quot; &quot;jp&quot;</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>stopwords_en_file_path <span class="ot">&lt;-</span> <span class="fu">mallet_stoplist_file_path</span>(<span class="st">&quot;en&quot;</span>)</span></code></pre></div>
</div>
<div id="training-topic-models" class="section level3">
<h3>Training topic models</h3>
<p>As a first step, we need to create an LDA trainer object and supply
the trainer with documents. We start by creating a mallet instance list
object. This function has a few extra options (whether to lowercase or
how we define a token). See <code>?mallet.import</code> for details.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>sotu.instances <span class="ot">&lt;-</span> </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mallet.import</span>(<span class="at">id.array =</span> <span class="fu">row.names</span>(sotu), </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">text.array =</span> sotu[[<span class="st">&quot;text&quot;</span>]], </span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">stoplist =</span> stopwords_en_file_path,</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">token.regexp =</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">p{L}[</span><span class="sc">\\</span><span class="st">p{L}</span><span class="sc">\\</span><span class="st">p{P}]+</span><span class="sc">\\</span><span class="st">p{L}&quot;</span>)</span></code></pre></div>
<p>If the data is already cleaned and we want to use the index of
<code>text.array</code>, we can supply the <code>text.array</code>.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>sotu.instances.short <span class="ot">&lt;-</span> </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mallet.import</span>(<span class="at">text.array =</span> sotu[[<span class="st">&quot;text&quot;</span>]])</span></code></pre></div>
<p>It is also possible to supply stop words as a character vector.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>stop_vector <span class="ot">&lt;-</span> <span class="fu">readLines</span>(stopwords_en_file_path)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>sotu.instances.short <span class="ot">&lt;-</span> </span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mallet.import</span>(<span class="at">text.array =</span> sotu[[<span class="st">&quot;text&quot;</span>]], </span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">stoplist =</span> stop_vector)</span></code></pre></div>
<p>We first need to create a topic trainer object to fit a model.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>topic.model <span class="ot">&lt;-</span> <span class="fu">MalletLDA</span>(<span class="at">num.topics=</span><span class="dv">10</span>, <span class="at">alpha.sum =</span> <span class="dv">1</span>, <span class="at">beta =</span> <span class="fl">0.1</span>)</span></code></pre></div>
<p>Load our documents. We could also pass in the filename of a saved
instance list file we build from the command-line tools.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>topic.model<span class="sc">$</span><span class="fu">loadDocuments</span>(sotu.instances)</span></code></pre></div>
<p>We use the method <code>getVocabulary()</code> to get the model’s
vocabulary. The vocabulary may be helpful in further curating the
stopword list.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>vocabulary <span class="ot">&lt;-</span> topic.model<span class="sc">$</span><span class="fu">getVocabulary</span>()</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(vocabulary)</span></code></pre></div>
<pre><code>## [1] &quot;congress&quot; &quot;united&quot;   &quot;states&quot;   &quot;quarter&quot;  &quot;century&quot;  &quot;ago&quot;</code></pre>
<p>Similarly, we can access the word and document frequencies with
<code>mallet.word.freqs()</code>.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>word_freqs <span class="ot">&lt;-</span> <span class="fu">mallet.word.freqs</span>(topic.model)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(word_freqs)</span></code></pre></div>
<pre><code>##       word word.freq doc.freq
## 1 congress      1025      879
## 2   united       508      426
## 3   states       557      480
## 4  quarter        16       15
## 5  century       166      155
## 6      ago       179      171</code></pre>
<p>To optimize hyperparameters ( and ) every 20 iterations, after 50
burn-in iterations, we set alpha optimization as follows.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>topic.model<span class="sc">$</span><span class="fu">setAlphaOptimization</span>(<span class="dv">20</span>, <span class="dv">50</span>)</span></code></pre></div>
<p>Now train a model. Note that hyperparameter optimization is on by
default. We can specify the number of iterations. Here we’ll use a
large-ish round number.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>topic.model<span class="sc">$</span><span class="fu">train</span>(<span class="dv">200</span>)</span></code></pre></div>
<p>We can also run through a few iterations where we pick the best topic
for each token rather than sampling from the posterior distribution.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>topic.model<span class="sc">$</span><span class="fu">maximize</span>(<span class="dv">10</span>)</span></code></pre></div>
</div>
<div id="analysis-of-a-topic-model" class="section level3">
<h3>Analysis of a topic model</h3>
<p>To analyze our corpus using our model, we usually want to access the
probability of topics per document and the probability of words per
topic. By default, these functions return raw word counts. Here we want
probabilities, so we normalize and add “smoothing” so that nothing has
exactly 0 probability.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>doc.topics <span class="ot">&lt;-</span> <span class="fu">mallet.doc.topics</span>(topic.model, <span class="at">smoothed=</span><span class="cn">TRUE</span>, <span class="at">normalized=</span><span class="cn">TRUE</span>)</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>topic.words <span class="ot">&lt;-</span> <span class="fu">mallet.topic.words</span>(topic.model, <span class="at">smoothed=</span><span class="cn">TRUE</span>, <span class="at">normalized=</span><span class="cn">TRUE</span>)</span></code></pre></div>
<p>What are the top words in topic 2? Notice that R indexes from 1 and
Java from 0, so this will be the topic that mallet called topic 1.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mallet.top.words</span>(topic.model, <span class="at">word.weights =</span> topic.words[<span class="dv">2</span>,], <span class="at">num.top.words =</span> <span class="dv">5</span>)</span></code></pre></div>
<pre><code>##        term     weight
## 1 president 0.02765733
## 2  congress 0.02275316
## 3     years 0.01816202
## 4   tonight 0.01607514
## 5       ago 0.01169269</code></pre>
<p>Show the largest document with at least 50% tokens belonging to topic
2. Note, since the model is not identified, you might end up with
another topic if you run the same code.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>docs <span class="ot">&lt;-</span> <span class="fu">which</span>(doc.topics[,<span class="dv">2</span>] <span class="sc">&gt;</span> <span class="fl">0.50</span>)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>doc_size <span class="ot">&lt;-</span> <span class="fu">nchar</span>(sotu[[<span class="st">&quot;text&quot;</span>]])[docs]</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>idx <span class="ot">&lt;-</span> docs[<span class="fu">order</span>(doc_size, <span class="at">decreasing =</span> <span class="cn">TRUE</span>)[<span class="dv">1</span>]]</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>sotu[[<span class="st">&quot;text&quot;</span>]][idx]</span></code></pre></div>
<pre><code>## [1] &quot;The last person I want to introduce is Jack Lucas from Hattiesburg,  Mississippi. Jack, would you stand up. Fifty years ago in the sands of Iwo  Jima, Jack Lucas taught and learned the lessons of citizenship. On February  the 20th, 1945, he and three of his buddies encountered the enemy and two  grenades at their feet. Jack Lucas threw himself on both of them. In that  moment he saved the lives of his companions and miraculously in the next  instant a medic saved his life. He gained a foothold for freedom and at the  age of 17, just a year older than his grandson, who&#39;s up there with him  today, and his son, who is a West Point graduate and a veteran, at 17, Jack  Lucas became the youngest marine in history and the youngest soldier in  this century to win the Congressional Medal of Honor. All these years  later, yesterday, here&#39;s what he said about that day: Didn&#39;t matter where  you were from or who you were. You relied on one another. You did it for  your country. We all gain when we give and we reap what we sow. That&#39;s at  the heart of this New Covenant. Responsibility, opportunity and  citizenship.  &quot;</code></pre>
<p>We can also study the topics and how the differ in different parts of
the corpus, for example in different time periods.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>post1975_topic_words <span class="ot">&lt;-</span> <span class="fu">mallet.subset.topic.words</span>(topic.model, sotu[[<span class="st">&quot;year&quot;</span>]] <span class="sc">&gt;</span> <span class="dv">1975</span>)</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mallet.top.words</span>(topic.model, <span class="at">word.weights =</span> post1975_topic_words[<span class="dv">2</span>,], <span class="at">num.top.words =</span> <span class="dv">5</span>)</span></code></pre></div>
<pre><code>##        term weight
## 1 president    150
## 2  congress    112
## 3   tonight    110
## 4     years    102
## 5     state     66</code></pre>
<p>Another functionality included in the <code>mallet</code> R package
is to (hierarchically) cluster the topics to assess what topics that are
“closer” to each other. Use <code>?mallet.topic.hclust</code> to see
further details on how to cluster topics.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>topic_labels <span class="ot">&lt;-</span> <span class="fu">mallet.topic.labels</span>(topic.model, <span class="at">num.top.words =</span> <span class="dv">2</span>)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>topic_clusters <span class="ot">&lt;-</span> <span class="fu">mallet.topic.hclust</span>(doc.topics, topic.words, <span class="at">balance =</span> <span class="fl">0.5</span>)</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(topic_clusters, <span class="at">labels=</span>topic_labels, <span class="at">xlab =</span> <span class="st">&quot;&quot;</span>, )</span></code></pre></div>
<p><img src="data:image/png;base64,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Bgyo7SKQHwLJFIhICCRY4Ntvv4369OkTuf89Wf/WXXfdaNy4cWX2wP3Ap5ZdtWpVmXn5+DBt2rRo5513jvr27ZuPzWfd5ueff57ax4psNttss8gdiGRdvzYnzp49O1XWSy+9tDazJi8EEi1ACziZx0WU6r8CAwcONBdg/acOHTrY0UcfbWuttZZvDb/77ru2bNky39I74IADfMuvEHB77rmnz3arrbYqRPa+N+DAAw80d7BhP/zwg/373/+2zz77zObMmWNHHXWUffjhh9amTZuClI1MEUCgYoH8981VnDdzEKhU4KWXXkoF3+7du9vbb79tV111lV122WU2Y8YM69+/v1//66+/thEjRlS6rV87U0FNgew///mP/fjjj792M/b999+ba7VWe/3vvvvOli5dWq3l1RX/17/+1W699Va799577aOPPrKLLrrIr6uAfO6552bdjmsamGud5rRf2o8FCxZk3V76RHWRL1myJH1Sle/nzZtX4TLanuq5OknLup6T6iyaWiZb3r/88ot98cUX/gBG3ejVST/99JNfJ3NZuS1evDhzMp9LXSDR7XMKV9ICRx55ZKrr0rXqylm4H8XItZCjMWPGROrmjFO2Lmh3fjZaZ511/N8NN9wQL+pfXevZT996661T07/88svohBNOiOrXr58qQ506daKePXtGc+fO9cu98cYbfj33G+KX0bLKY/To0antvPzyy9H2228faV0t587PRmeddVb0888/p5bRm9/+9rd+Xe2zO4cd1atXL2rQoEH05z//ucxy8Yf0Lujf//738eTU68qVKyN3ntznqbxdYEjNU95nn3121KRJEz/fnSOPOnfuHKms6enkk0/2ZerWrVv0wQcfRF27do20rPZD3duTJ09OX9y/nzp1apl8tY6Wi43iLmjlFdfHU089FXXq1Mkv487nRy7Q+m25A55o0KBBketZSK2/ySabRNdee23kgmO5vF944YXUdlTO3XbbLXIHTlGLFi18XrFldfIePny4r6u43Hpt165dNGXKlFS+jz/+eGofXG9MdPjhh/s607Kbb7559Nprr0VuvEK0zz77+PpUPWyzzTaRO3hMbYM3pS1gpb377H2SBRQQ9WPWtGnTnIqZLQDrRy/+MR05cmSZ7f3mN7/x8xRU4hRPU1BVAE0PovpBdYOu/A9svM301+uuu85vRsFIgTSe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V5dz1SjoyZMnW48ePcrNYwICCCCAAAJJEAguAAutY8eOfoTzihUrbO7cub7Vu3LlSmvdurW1adPG1CImIVAKAo888kjiTrWMHj3aWrVqVQr87CMCayQQZACO97hhw4Y+GCsg//jjj/bBBx/4S5HWW289f2OOeDleEShWAfUIJS1ttdVWSSsS5UEgkQLBDcK69tpr7dJLLy2DeeWVV/q7YOkuRZ06dbItt9zSd0GXWYgPCCCAAAIIJEgguBaw7mi0aNGiFOFdd91lF110kb9zkgZoff/99/bAAw/YEUccYS+//LIlsYWQKjxvEEAAAQRKViC4AJxZU7fffrvtvvvuZUY8n3322bbTTjvZDTfcYHfffXfmKnxGAAEEEECg4ALBdUFnin377bd2/PHHZ062U045xd55551y05mAAAIIIIBAEgSCDMA//fSTadSz0uGHH+4fyJCJ+eabb9oGG2yQOZnPCCCAAAIIJEIguACshy48//zz1qRJE+vatasp0OrJSG+//bYHnTdvnp122ml277332u9///tEIFMIBBBAAAEEMgWCC8C33XabD7Z6Ms0ee+xhy5cvt/r169tnn33m9+0f//iHaZ66oE8++eTM/eUzAggggAACiRAIbhCWrv3VyGb96YELcYqfCXzooYfaIYcc4m/IEc/jFQEEEEAAgaQJBBeAMwH1gPTFixf7G2/oucC6G9aaJG3vl19+qXITPJi9SiIWQAABBBCoRCC4Lmjty/z5823IkCH+ucBqEbds2dLffrJZs2bWuXNnGzx4sC1btqyS3a54lp4h3Lhx4yr/Xn31VXv//fcr3hBzEEAAAQQQqESgjmvJRZXMT9ysOXPmWPfu3U2DsXr37m3t27f3d8HSZz0NadasWTZ+/HjTbk2ZMsU/LSlxO0GBKhXQ+fwDDjggdV6/0oVrcaa+Y4H9d6lFHbJCAIFcBYILwGeccYa/vlePGmzUqFHW/dUlSr169bI999zThg0blnUZJiZXgACc3LqhZAggUHMCwXVBT58+3fr161dh8BVNgwYN/ACtSZMm1ZwUW0IAAQQQQKAGBYILwN26dbNp06ZVSTB16tTEPaatykKzAAIIIIBAyQgENwpaD1xQEF64cKH17dvXn+PV83/r1q3rzwHPnj3bxo4daxMnTixzf+iSqVF2FAEEEEAgCIHgArCu/9UTkQYOHGj9+/e31atXl4Pu2bOnfxxhjx49ys1jQvIFdDnZWWedlbiCDh06NHFlokAIIBCuQHCDsNKpV6xYYXPnzjW1ejXwStcAt2nTxl+SlL4c7xFAAAEEEEiaQNABuDLMpUuX+ltU6ppeEgIIIIAAAkkTCG4QVnUB27Zt67uoq7s8yyGAAAIIIFCbAsGdA64uzqBBg2yLLbao7uIshwACCCCAQK0KFG0XdK0qkhkCCCCAAAI5CgTfBa1bAy5atMhfgpTjvrM4AggggAACBRMIMgDn82EMBasJMkYAAQQQKCmB4LqgeRhDSX0/2VkEEECgaAWCC8A8jKFov4vsGAIIIFBSAsF1QfMwhpL6frKzCCCAQNEKBBeAeRhD0X4X2TEEEECgpASCuw6YhzGU1PeTnUUAAQSKViC4c8CqiU8//dQ/jOH555+v8GEMF110ke2zzz5FW3HsGAIIIIBA2AJBBuCYnIcxxBK8IoAAAgiEJhB0AA4Nm/IigAACCCAQCwQ3CCsuOK8IIIAAAgiELEAADrn2KDsCCCCAQLACBOBgq46CI4AAAgiELEAADrn2KDsCCCCAQLACBOBgq46CI4AAAgiELEAADrn2KDsCCCCAQLACBOBgq46CI4AAAgiELEAADrn2KDsCCCCAQLACBOBgq46CI4AAAgiELEAADrn2KDsCCCCAQLACBOBgq46CI4AAAgiELEAADrn2KDsCCCCAQLACBOBgq46CI4AAAgiELEAADrn2KDsCCCCAQLACBOBgq46CI4AAAgiELEAADrn2KDsCCCCAQLACBOBgq46CI4AAAgiELEAADrn2KDsCCCCAQLACBOBgq46CI4AAAgiELEAADrn2KDsCCCCAQLACBOBgq46CI4AAAgiELEAADrn2KDsCCCCAQLACBOBgq46CI4AAAgiELEAADrn2KDsCCCCAQLACBOBgq46CI4AAAgiELEAADrn2KDsCCCCAQLACBOBgq46CI4AAAgiELEAADrn2KDsCCCCAQLACBOBgq46CI4AAAgiELEAADrn2KDsCCCCAQLACBOBgq46CI4AAAgiELEAADrn2KDsCCCCAQLACBOBgq46CI4AAAgiELEAADrn2KDsCCCCAQLACBOBgq46CI4AAAgiELEAADrn2KDsCCCCAQLACBOBgq46CI4AAAgiELEAADrn2KDsCCCCAQLACBOBgq46CI4AAAgiELEAADrn2KDsCCCCAQLACBOBgq46CI4AAAgiELEAADrn2KDsCCCCAQLACBOBgq46CI4AAAgiELEAADrn2KDsCCCCAQLACBOBgq46CI4AAAgiELEAADrn2KDsCCCCAQLACBOBgq46CI4AAAgiELEAADrn2KDsCCCCAQLACBOBgq46CI4AAAgiELEAADrn2KDsCCCCAQLACBOBgq46CI4AAAgiELEAADrn2KDsCCCCAQLACBOBgq46CI4AAAgiELEAADrn2KDsCCCCAQLACBOBgq46CI4AAAgiELEAADrn2KDsCCCCAQLACBOBgq46CI4AAAgiELEAADrn2KDsCCCCAQLACBOBgq46CI4AAAgiELEAADrn2KDsCCCCAQLACBOBgq46CI4AAAgiELEAADrn2KDsCCCCAQLACBOBgq46CI4AAAgiELEAADrn2KDsCCCCAQLACBOBgq46CI4AAAgiELEAADrn2KDsCCCCAQLACBOBgq46CI4AAAgiELEAADrn2KDsCCCCAQLACBOBgq46CI4AAAgiELEAADrn2KDsCCCCAQLACBOBgq46CI4AAAgiELEAADrn2KDsCCCCAQLACBOBgq46CI4AAAgiELEAADrn2KDsCCCCAQLACBOBgq46CI4AAAgiELEAADrn2KDsCCCCAQLACBOBgq46CI4AAAgiELEAADrn2KDsCCCCAQLACBOBgq46CI4AAAgiELEAADrn2KDsCCCCAQLACBOBgq46CI4AAAgiELEAADrn2KDsCCCCAQLACBOBgq46CI4AAAgiELEAADrn2KDsCCCCAQLACBOBgq46CI4AAAgiELEAADrn2KDsCCCCAQLACBOBgq46CI4AAAgiELEAADrn2KDsCCCCAQLACBOBgq46CI7DmAjNnzrQoilIb+vTTT23p0qWpz7zJj8C8efPsu+++y8/G2WowAgTgYKqKgsYCr7zyiv3rX/+KP1brdfHixXb33XdXa9nqLvSHP/zBdt111+ounnW5Ro0a2ejRo7PO+7UTq+szceJEGzJkiNWpUyeV1fHHH29vv/126nN13kyZMsVv4+GHH7bevXtbixYtqrNaQZd5/PHHfZm//PLLapdj9erVdsstt9jPP/9c7XUGDhzo89FBjpxPPfVUv+4bb7xhJ598crW3w4LFKUAALs56Ldq9WrVqlXXr1s3UUssl6YfwoYceymWVIJetro+CyUUXXWRXX32138/TTjvNBwet//TTT1uXLl3sP//5T5AG+Sq0vj+nn366/fLLL9XOIv3gJn2lI444whT8dbBEKl0BAnDp1n2Qe66WRHqXaXV3QgGnoh/D6m4jhOWq63PvvffaxhtvbFtvvbXfrT/+8Y+26aab2ltvvWUvvviiDR8+3Fq2bFmtXW7durVfTtvT+1atWlVrvdAW0nco1ySPjTbayH/35BJbaTtnnnmmnX/++blukuWLSIAAXESVWSy7cvPNN9uWW25p66yzjm+J3XjjjX7XfvzxR9t99939+2HDhln//v39+xUrVtiFF15oO+ywg1+nU6dOdvbZZ5uWV9IP3fPPP++7rXfZZRdbsGCBff/993biiSf6INS8eXPbZ5997NVXX/XL6593333XtOyTTz6ZmnbIIYfYWWedlfocvxk7dqxtv/32vuv1sMMOsy+++CKe5V9vv/1223vvvW3DDTe0E044wV544YUy8+MPmq48v/7663iSf+3ataupezdOufrE68Wv8rr00kvtyCOPjCfZNtts430UEObMmePLuu6666bmV/Zmiy22sIYNG/o623bbbf224uWXLVvmzRTotZxa3fPnz49n28KFC309bLLJJj7Pww8/vEzL+/LLL7dLLrnE7rrrLl+/CmCDBg3yB2E33XSTbbXVVrbddtvZ9ddfn9qmWpVyVDeveks22GADO/bYY6vsWn/vvffsgAMOMH0f4rKuXLnSb/eJJ57w5dCHvfbay3QAo/TDDz/4VvHmm2/uy6+W7dy5c/08/aOyqYxKmTYHH3ywvfbaa/aPf/zDz+efEhRwR8wkBBIj4AKeRgRFLqBGjz32WHTOOef4z+4HOHI/htEdd9zhP7vzZ5GWVTrmmGMi9yMbXXXVVZELVNFJJ53klxk6dKifP3ny5GinnXaKXICOtB03yCjq169f5Fp80V//+tfowQcfjFyAjNz52MidK/brvP76636b999/v/+sf7S+8oqTyqB1Nttss+i6666LlJ/78Y722GOPeBGfX/369aOLL744euSRRyIXoKOmTZum8nGBKxo1apRfXvurfXcHCKn19aZu3bqRCzZ+2q/xKbMx98EFJp/P559/nprlDlYid6ASufOb0ZgxYyJ3fjg1rzpvPv74Y7+YbOPyu67a6NBDD43atGkT3Xnnnb7u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" /><!-- --></p>
</div>
</div>
<div id="save-and-load-topic-states" class="section level2">
<h2>Save and load topic states</h2>
<p>We can also store our current topic model state to use it for
postprocessing. We can store the state file either as a text file or a
compressed gzip file.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>state_file <span class="ot">&lt;-</span> <span class="fu">file.path</span>(<span class="fu">tempdir</span>(), <span class="st">&quot;temp_mallet_state.gz&quot;</span>)</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="fu">save.mallet.state</span>(<span class="at">topic.model =</span> topic.model, <span class="at">state.file =</span> state_file)</span></code></pre></div>
<p>We also store the topic counts per document and remove the old
model.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>doc.topics.counts <span class="ot">&lt;-</span> <span class="fu">mallet.doc.topics</span>(topic.model, <span class="at">smoothed=</span><span class="cn">FALSE</span>, <span class="at">normalized=</span><span class="cn">FALSE</span>)</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(topic.model)</span></code></pre></div>
<p>To initialize a model with the sampled topic indicators, one needs to
create a new model, load the same data and then load the topic
indicators. Unfortunately, setting the alpha parameter vector is
currently not possible, so it is not currently possible to initialize
the model with the same alpha prior.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>new.topic.model <span class="ot">&lt;-</span> <span class="fu">MalletLDA</span>(<span class="at">num.topics=</span><span class="dv">10</span>, <span class="at">alpha.sum =</span> <span class="dv">1</span>, <span class="at">beta =</span> <span class="fl">0.1</span>)</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>new.topic.model<span class="sc">$</span><span class="fu">loadDocuments</span>(sotu.instances)</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="fu">load.mallet.state</span>(<span class="at">topic.model =</span> new.topic.model, <span class="at">state.file =</span> state_file)</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>doc.topics.counts[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>]</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5] [,6]
## [1,]    0    3    0    0    0    0
## [2,]    4    5    0    0   25    0
## [3,]    3    2    0    0   34    0</code></pre>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mallet.doc.topics</span>(new.topic.model, <span class="at">smoothed=</span><span class="cn">FALSE</span>, <span class="at">normalized=</span><span class="cn">FALSE</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>]</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5] [,6]
## [1,]    0    3    0    0    0    0
## [2,]    4    5    0    0   25    0
## [3,]    3    2    0    0   34    0</code></pre>
<p>This vignette gives a first example of using the mallet R package for
topic modelling.</p>
</div>
<div id="save-and-load-topic-models" class="section level2">
<h2>Save and load topic models</h2>
<p>We can also save Mallet topic models and load them back into R.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>model_file <span class="ot">&lt;-</span> <span class="fu">file.path</span>(<span class="fu">tempdir</span>(), <span class="st">&quot;temp_mallet.model&quot;</span>)</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mallet.topic.model.save</span>(new.topic.model, model_file)</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>read.topic.model <span class="ot">&lt;-</span> <span class="fu">mallet.topic.model.read</span>(model_file)</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>doc.topics.counts[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>]</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5] [,6]
## [1,]    0    3    0    0    0    0
## [2,]    4    5    0    0   25    0
## [3,]    3    2    0    0   34    0</code></pre>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mallet.doc.topics</span>(read.topic.model, <span class="at">smoothed=</span><span class="cn">FALSE</span>, <span class="at">normalized=</span><span class="cn">FALSE</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>]</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5] [,6]
## [1,]    0    3    0    0    0    0
## [2,]    4    5    0    0   25    0
## [3,]    3    2    0    0   34    0</code></pre>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
